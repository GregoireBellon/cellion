services:
  back:
    build:
      context: ./back
      dockerfile: docker/dev.Dockerfile
    volumes:
      - ./back:/usr/src/app
    env_file:
      - ./back/.env
    command: cargo watch -x run

    ports:
      - 127.0.0.1:5000:5000
  front:
    build:
      context: ./front
      dockerfile: docker/Dockerfile
    environment:
      - BACK_REF=back
    ports:
      - 127.0.0.1:8080:80
    depends_on:
      - back
